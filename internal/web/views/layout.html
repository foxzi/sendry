<!DOCTYPE html>
<html lang="{{if .Lang}}{{.Lang}}{{else}}en{{end}}" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{if .Title}}{{.Title}} - {{end}}Sendry Web</title>
    <script src="https://unpkg.com/htmx.org@1.9.10"></script>
    <link rel="stylesheet" href="/static/css/style.css">
    <script>
        (function() {
            var theme = localStorage.getItem('theme') || 'light';
            document.documentElement.setAttribute('data-theme', theme);
        })();
    </script>
</head>
<body>
    {{if .User}}
    <nav class="navbar">
        <div class="navbar-brand">
            <a href="/">Sendry Web</a>
        </div>
        <div class="navbar-menu">
            <a href="/templates" {{if eq .Active "templates"}}class="active"{{end}} data-i18n="nav.templates">Templates</a>
            <a href="/recipients" {{if eq .Active "recipients"}}class="active"{{end}} data-i18n="nav.recipients">Recipients</a>
            <a href="/campaigns" {{if eq .Active "campaigns"}}class="active"{{end}} data-i18n="nav.campaigns">Campaigns</a>
            <a href="/jobs" {{if eq .Active "jobs"}}class="active"{{end}} data-i18n="nav.jobs">Jobs</a>
            <a href="/sends" {{if eq .Active "sends"}}class="active"{{end}} data-i18n="nav.sends">Sends</a>
            <a href="/monitoring" {{if eq .Active "monitoring"}}class="active"{{end}} data-i18n="nav.monitoring">Monitoring</a>
            <a href="/settings" {{if or (eq .Active "settings") (eq .Active "servers") (eq .Active "domains") (eq .Active "dkim")}}class="active"{{end}} data-i18n="nav.settings">Settings</a>
        </div>
        <div class="navbar-end">
            <button id="theme-toggle" class="btn btn-icon" title="Toggle theme" aria-label="Toggle theme">
                <span class="icon-sun">‚òÄÔ∏è</span>
                <span class="icon-moon">üåô</span>
            </button>
            <div class="lang-selector">
                <button class="btn btn-sm lang-btn" data-lang="en">EN</button>
                <button class="btn btn-sm lang-btn" data-lang="ru">RU</button>
            </div>
            <span class="user-email">{{.User.Email}}</span>
            <a href="/auth/logout" class="btn btn-sm" data-i18n="logout">Logout</a>
        </div>
    </nav>
    {{end}}

    <main class="container">
        {{if .Flash}}
        <div class="alert alert-{{.Flash.Type}}">
            {{.Flash.Message}}
        </div>
        {{end}}

        {{template "content" .}}
    </main>

    <footer class="footer">
        <p>Sendry Web &copy; 2025</p>
    </footer>

    <script src="/static/js/i18n.js"></script>
    <script src="/static/js/app.js"></script>
</body>
</html>
