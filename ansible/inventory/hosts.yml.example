all:
  children:
    # Single server deployment
    sendry_single:
      hosts:
        mail.example.com:
          ansible_host: 192.168.1.10
          sendry_hostname: mail.example.com
          sendry_api_key: "change-this-api-key"
          sendry_smtp_auth_users:
            admin: "change-this-password"
          sendry_domains:
            example.com:
              dkim_enabled: true
              dkim_selector: mail
              rate_limit:
                messages_per_hour: 1000
                messages_per_day: 10000

    # Multi-server deployment with shared DKIM keys
    sendry_cluster:
      hosts:
        mail1.example.com:
          ansible_host: 192.168.1.20
          sendry_hostname: mail1.example.com
        mail2.example.com:
          ansible_host: 192.168.1.21
          sendry_hostname: mail2.example.com
        mail3.example.com:
          ansible_host: 192.168.1.22
          sendry_hostname: mail3.example.com

      vars:
        ansible_user: root
        sendry_install_method: package
        sendry_version: latest

        sendry_api_key: "shared-api-key-for-cluster"
        sendry_smtp_auth_users:
          admin: "shared-admin-password"
          api: "shared-api-password"

        sendry_domains:
          example.com:
            dkim_enabled: true
            dkim_selector: mail
            mode: production
            rate_limit:
              messages_per_hour: 5000
              messages_per_day: 50000

        # DKIM keys management:
        # Option 1: Use the DKIM playbook (recommended):
        #   ansible-playbook playbooks/dkim.yml -e dkim_action=generate -e dkim_domain=example.com
        #   ansible-playbook playbooks/dkim.yml -e dkim_action=deploy
        #
        # Option 2: Provide keys manually in sendry_dkim_keys (store in Ansible Vault):
        # sendry_dkim_keys:
        #   example.com:
        #     private: |
        #       -----BEGIN PRIVATE KEY-----
        #       ...
        #       -----END PRIVATE KEY-----
        #     public: |
        #       -----BEGIN PUBLIC KEY-----
        #       ...
        #       -----END PUBLIC KEY-----
        sendry_dkim_keys: {}

  vars:
    ansible_user: root
    # ansible_ssh_private_key_file: ~/.ssh/id_rsa
